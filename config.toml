[db]
username = "root"  # 数据库用户名
password = "root"  # 数据库密码
host = "10.80.5.25"  # 数据库地址
port = "27017"  # 数据库端口
database = "facerecapi" # 数据库名称
auth_source = "admin" # 数据库认证源
limit = 5000 # 限制返回结果条数
[face]
threshold = 0.4 # 人脸识别阈值
candidate_threshold = 0.2 # 候选人脸阈值
rec_min_face_hw = 50 # （识别阶段）最小人脸高度和宽度

[face_detection]
# 人脸检测器选择: "dlib" 或 "insightface"
detector = "insightface"  # 可选: "dlib" 或 "insightface"
# InsightFace 配置（仅在 detector = "insightface" 时生效）


[face_detection.insightface]
model_name = "buffalo_l" # 模型名称: "buffalo_l" (大模型，精度高) 或 "buffalo_s" (小模型，速度快)
model_path = "/root/workspace/FaceRecAPI_DEV/app/ai_models"  # 模型文件路径 例如: "/path/to/models"
device = "gpu"  # 可选: "gpu" 或 "cpu"
gpu_id = 1 # GPU设备ID（仅在 device = "gpu" 时生效，0表示第一张GPU，1表示第二张，以此类推）
det_size = 320  # 检测尺寸（越大精度越高但速度越慢）可选: 320, 640, 1280
det_thresh = 0.75 # 人脸检测阈值



[gpu]
gpu_id = 1  # GPU Embedding GPU ID
[threading]
max_workers = 1  # dlib 但是实例的进程数
[frontlogin]
username = "admin"  # 前端登录用户名
password = "admin"  # 前端登录密码
[image]
max_feature_image_width_px = 9999  # 最大特征图片宽度 （以下都是为了控制像素大小）
max_feature_image_height_px = 9999  # 最大特征图片高度
min_feature_image_width_px = 80     # 最小特征图片宽度
min_feature_image_height_px = 80    # 最小特征图片高度
max_feature_image_size_m = 10 # 最大特征图片大小（MB）
max_face_hw = 999  # （提取特征阶段）最大人脸高度和宽度
min_face_hw = 50  # 最小人脸高度和宽度
[logger]
level = "INFO"  # 日志级别
log_path = "./app/logs/facere_service.log"  # 日志文件路径

[stats]
# 统计数据保留天数（自动清理超过该天数的数据）
retention_days = 7  # 保留7天的详细日志
hourly_retention_days = 30  # 保留30天的按小时聚合数据

[redis]
host = "localhost"  # Redis 服务器地址
port = 6379  # Redis 端口
password = ""  # Redis 密码（如果没有设置密码则留空）
db = 0  # Redis 数据库编号（0-15）
max_connections = 500  # 连接池最大连接数
socket_timeout = 30  # Socket 超时时间（秒）
socket_connect_timeout = 10  # Socket 连接超时时间（秒）
decode_responses = false  # 是否自动解码响应为字符串（false 以支持二进制数据如 Pickle）

[redis.cache]
# 缓存配置
embeddings_ttl = 0  # 人脸特征向量缓存过期时间（0表示永不过期，手动刷新）
enable_embedding_cache = true  # 是否启用特征向量缓存
refresh_on_startup = true  # 启动时是否自动加载人员信息到Redis
refresh_interval_days = 7  # 定时全量刷新间隔（天）
refresh_on_update = true  # 人员增删改时是否实时更新Redis
